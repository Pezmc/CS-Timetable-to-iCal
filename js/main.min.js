/*! 
 * jQuery Steps v1.0.4 - 12/17/2013
 * Copyright (c) 2013 Rafael Staib (http://www.jquery-steps.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */!function(e,t){function n(e,t){d(e).push(t)}function r(r,i,s){var o=r.children(i.headerTag),u=r.children(i.bodyTag);o.length>u.length?z(G,"contents"):o.length<u.length&&z(G,"titles");var a=i.startIndex;if(s.stepCount=o.length,i.saveState&&e.cookie){var f=e.cookie(V+m(r)),l=parseInt(f,0);!isNaN(l)&&l<s.stepCount&&(a=l)}s.currentIndex=a,o.each(function(i){var s=e(this),o=u.eq(i),a=o.data("mode"),f=null==a?Y.html:g(Y,/^\s*$/.test(a)||isNaN(a)?a:parseInt(a,0)),l=f===Y.html||o.data("url")===t?"":o.data("url"),c=f!==Y.html&&"1"===o.data("loaded"),h=e.extend({},tt,{title:s.html(),content:f===Y.html?o.html():"",contentUrl:l,contentMode:f,contentLoaded:c});n(r,h)})}function i(e,t){return e.currentIndex-t}function s(t,n){var r=a(t);t.unbind(r).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(r),t.removeClass(n.clearFixCssClass+" vertical");var i=t.find(".content > *");i.removeData("loaded").removeData("mode").removeData("url"),i.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),t.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var s=e(u('<{0} class="{1}"></{0}>',t.get(0).tagName,t.attr("class"))),o=t._getId();return null!=o&&""!==o&&s._setId(o),s.html(t.find(".content").html()),t.after(s),t.remove(),s}function o(e,t){var n=e.find(".steps li").eq(t.currentIndex);e.triggerHandler("finishing",[t.currentIndex])?(n.addClass("done").removeClass("error"),e.triggerHandler("finished",[t.currentIndex])):n.addClass("error")}function u(e){for(var t=1;t<arguments.length;t++){var n=t-1,r=new RegExp("\\{"+n+"\\}","gm");e=e.replace(r,arguments[t])}return e}function a(e){var t=e.data("eventNamespace");return null==t&&(t="."+m(e),e.data("eventNamespace",t)),t}function f(e,t){var n=m(e);return e.find("#"+n+$+t)}function l(e,t){var n=m(e);return e.find("#"+n+J+t)}function c(e,t){var n=m(e);return e.find("#"+n+K+t)}function h(e){return e.data("options")}function p(e){return e.data("state")}function d(e){return e.data("steps")}function v(e,t){var n=d(e);return(0>t||t>=n.length)&&z(Q),n[t]}function m(e){var t=e.data("uid");return null==t&&(t=e._getId(),null==t&&(t="steps-uid-".concat(X),e._setId(t)),X++,e.data("uid",t)),t}function g(e,n){if(W("enumType",e),W("keyOrValue",n),"string"==typeof n){var r=e[n];return r===t&&z("The enum key '{0}' does not exist.",n),r}if("number"==typeof n){for(var i in e)if(e[i]===n)return n;z("Invalid enum value '{0}'.",n)}else z("Invalid key or value type.")}function y(e,t,n){return k(e,t,n,E(n,1))}function b(e,t,n){return k(e,t,n,i(n,1))}function w(e,t,n,r){if((0>r||r>=n.stepCount)&&z(Q),!(t.forceMoveForward&&r<n.currentIndex)){var i=n.currentIndex;return e.triggerHandler("stepChanging",[n.currentIndex,r])?(n.currentIndex=r,q(e,t,n),O(e,t,n,i),A(e,t,n),C(e,t,n),R(e,t,n,r,i),e.triggerHandler("stepChanged",[r,i])):e.find(".steps li").eq(i).addClass("error"),!0}}function E(e,t){return e.currentIndex+t}function S(t){var n=e.extend(!0,{},nt,t);return this.each(function(){var t=e(this),i={currentIndex:n.startIndex,currentStep:null,stepCount:0,transitionElement:null};t.data("options",n),t.data("state",i),t.data("steps",[]),r(t,n,i),H(t,n,i),_(t,n),n.autoFocus&&0===X&&f(t,n.startIndex).focus()})}function x(t,n,r,i,s){(0>i||i>r.stepCount)&&z(Q),s=e.extend({},tt,s),T(t,i,s),r.currentIndex>=i&&(r.currentIndex++,q(t,n,r)),r.stepCount++;var o=t.find(".content"),a=e(u("<{0}>{1}</{0}>",n.headerTag,s.title)),f=e(u("<{0}></{0}>",n.bodyTag));return(null==s.contentMode||s.contentMode===Y.html)&&f.html(s.content),0===i?o.prepend(f).prepend(a):l(t,i-1).after(f).after(a),B(t,f,i),I(t,n,r,a,i),M(t,n,r,i),A(t,n,r),t}function T(e,t,n){d(e).splice(t,0,n)}function N(t){var n=e(this),r=h(n),i=p(n);if(r.suppressPaginationOnFocus&&n.find(":focus").is(":input"))return t.preventDefault(),!1;var s={left:37,right:39};t.keyCode===s.left?(t.preventDefault(),b(n,r,i)):t.keyCode===s.right&&(t.preventDefault(),y(n,r,i))}function C(t,n,r){if(r.stepCount>0){var i=v(t,r.currentIndex);if(!n.enableContentCache||!i.contentLoaded)switch(g(Y,i.contentMode)){case Y.iframe:t.find(".content > .body").eq(r.currentIndex).empty().html('<iframe src="'+i.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case Y.async:var s=l(t,r.currentIndex)._aria("busy","true").empty().append(F(n.loadingTemplate,{text:n.labels.loading}));e.ajax({url:i.contentUrl,cache:!1}).done(function(e){s.empty().html(e)._aria("busy","false").data("loaded","1")})}}}function k(e,t,n,r){var i=n.currentIndex;if(r>=0&&r<n.stepCount&&!(t.forceMoveForward&&r<n.currentIndex)){var s=f(e,r),o=s.parent(),u=o.hasClass("disabled");return o._enableAria(),s.click(),i===n.currentIndex&&u?(o._disableAria(),!1):!0}return!1}function L(t){t.preventDefault();var n=e(this),r=n.parent().parent().parent().parent(),i=h(r),s=p(r),u=n.attr("href");switch(u.substring(u.lastIndexOf("#"))){case"#finish":o(r,s);break;case"#next":y(r,i,s);break;case"#previous":b(r,i,s)}}function A(e,t,n){if(t.enablePagination){var r=e.find(".actions a[href$='#finish']").parent(),i=e.find(".actions a[href$='#next']").parent();if(!t.forceMoveForward){var s=e.find(".actions a[href$='#previous']").parent();n.currentIndex>0?s._enableAria():s._disableAria()}t.enableFinishButton&&t.showFinishButtonAlways?0===n.stepCount?(r._disableAria(),i._disableAria()):n.stepCount>1&&n.stepCount>n.currentIndex+1?(r._enableAria(),i._enableAria()):(r._enableAria(),i._disableAria()):0===n.stepCount?(r._hideAria(),i._showAria()._disableAria()):n.stepCount>n.currentIndex+1?(r._hideAria(),i._showAria()._enableAria()):t.enableFinishButton?(r._showAria(),i._hideAria()):i._disableAria()}}function O(t,n,r,i){var s=f(t,r.currentIndex),o=e('<span class="current-info audible">'+n.labels.current+" </span>"),u=t.find(".content > .title");if(null!=i){var a=f(t,i);a.parent().addClass("done").removeClass("error")._deselectAria(),u.eq(i).removeClass("current").next(".body").removeClass("current"),o=a.find(".current-info"),s.focus()}s.prepend(o).parent()._selectAria().removeClass("done")._enableAria(),u.eq(r.currentIndex).addClass("current").next(".body").addClass("current")}function M(e,t,n,r){for(var i=m(e),s=r;s<n.stepCount;s++){var o=i+$+s,u=i+J+s,a=i+K+s,f=e.find(".title").eq(s)._setId(a);e.find(".steps a").eq(s)._setId(o)._aria("controls",u).attr("href","#"+a).html(F(t.titleTemplate,{index:s+1,title:f.html()})),e.find(".body").eq(s)._setId(u)._aria("labelledby",a)}}function _(e,t){var n=a(e);e.bind("finishing"+n,t.onFinishing),e.bind("finished"+n,t.onFinished),e.bind("stepChanging"+n,t.onStepChanging),e.bind("stepChanged"+n,t.onStepChanged),t.enableKeyNavigation&&e.bind("keyup"+n,N),e.find(".actions a").bind("click"+n,L)}function D(e,t,n,r){return 0>r||r>=n.stepCount||n.currentIndex===r?!1:(P(e,r),n.currentIndex>r&&(n.currentIndex--,q(e,t,n)),n.stepCount--,c(e,r).remove(),l(e,r).remove(),f(e,r).parent().remove(),0===r&&e.find(".steps li").first().addClass("first"),r===n.stepCount&&e.find(".steps li").eq(r).addClass("last"),M(e,t,n,r),A(e,t,n),!0)}function P(e,t){d(e).splice(t,1)}function H(t,n,r){var i='<{0} class="{1}">{2}</{0}>',s=g(Z,n.stepsOrientation),o=s===Z.vertical?" vertical":"",a=e(u(i,n.contentContainerTag,"content "+n.clearFixCssClass,t.html())),f=e(u(i,n.stepsContainerTag,"steps "+n.clearFixCssClass,'<ul role="tablist"></ul>')),l=a.children(n.headerTag),c=a.children(n.bodyTag);t.attr("role","application").empty().append(f).append(a).addClass(n.cssClass+" "+n.clearFixCssClass+o),c.each(function(n){B(t,e(this),n)}),c.eq(r.currentIndex)._showAria(),l.each(function(i){I(t,n,r,e(this),i)}),O(t,n,r),j(t,n,r)}function B(e,t,n){var r=m(e),i=r+J+n,s=r+K+n;t._setId(i).attr("role","tabpanel")._aria("labelledby",s).addClass("body")._hideAria()}function j(e,t,n){if(t.enablePagination){var r='<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',i='<li><a href="#{0}" role="menuitem">{1}</a></li>',s="";t.forceMoveForward||(s+=u(i,"previous",t.labels.previous)),s+=u(i,"next",t.labels.next),t.enableFinishButton&&(s+=u(i,"finish",t.labels.finish)),e.append(u(r,t.actionContainerTag,t.clearFixCssClass,t.labels.pagination,s)),A(e,t,n),C(e,t,n)}}function F(e,n){for(var r=e.match(/#([a-z]*)#/gi),i=0;i<r.length;i++){var s=r[i],o=s.substring(1,s.length-1);n[o]===t&&z("The key '{0}' does not exist in the substitute collection!",o),e=e.replace(s,n[o])}return e}function I(t,n,r,i,s){var o=m(t),u=o+$+s,f=o+J+s,l=o+K+s,c=t.find(".steps > ul"),h=F(n.titleTemplate,{index:s+1,title:i.html()}),p=e('<li role="tab"><a id="'+u+'" href="#'+l+'" aria-controls="'+f+'">'+h+"</a></li>");n.enableAllSteps||p._disableAria(),r.currentIndex>s&&p._enableAria().addClass("done"),i._setId(l).attr("tabindex","-1").addClass("title"),0===s?c.prepend(p):c.find("li").eq(s-1).after(p),0===s&&c.find("li").removeClass("first").eq(s).addClass("first"),s===r.stepCount-1&&c.find("li").removeClass("last").eq(s).addClass("last"),p.children("a").bind("click"+a(t),U)}function q(t,n,r){n.saveState&&e.cookie&&e.cookie(V+m(t),r.currentIndex)}function R(t,n,r,i,s){var o=t.find(".content > .body"),u=g(et,n.transitionEffect),a=n.transitionEffectSpeed,f=o.eq(i),l=o.eq(s);switch(u){case et.fade:case et.slide:var c=u===et.fade?"fadeOut":"slideUp",h=u===et.fade?"fadeIn":"slideDown";r.transitionElement=f,l[c](a,function(){var t=e(this)._hideAria().parent().parent(),n=p(t);n.transitionElement&&(n.transitionElement[h](a,function(){e(this)._showAria()}),n.transitionElement=null)}).promise();break;case et.slideLeft:var d=l.outerWidth(!0),v=i>s?-d:d,m=i>s?d:-d;l.animate({left:v},a,function(){e(this)._hideAria()}).promise(),f.css("left",m+"px")._showAria().animate({left:0},a).promise();break;default:l._hideAria(),f._showAria()}}function U(t){t.preventDefault();var n=e(this),r=n.parent().parent().parent().parent(),i=h(r),s=p(r),o=s.currentIndex;if(n.parent().is(":not(.disabled):not(.current)")){var u=n.attr("href"),a=parseInt(u.substring(u.lastIndexOf("-")+1),0);w(r,i,s,a)}return o===s.currentIndex?(f(r,o).focus(),!1):void 0}function z(e){throw arguments.length>1&&(e=u.apply(this,arguments)),new Error(e)}function W(e,t){null==t&&z("The argument '{0}' is null or undefined.",e)}var X=0,V="jQu3ry_5teps_St@te_",$="-t-",J="-p-",K="-h-",Q="Index out of range.",G="One or more corresponding step {0} are missing.";e.fn.steps=function(t){return e.fn.steps[t]?e.fn.steps[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.steps"),void 0):S.apply(this,arguments)},e.fn.steps.add=function(e){var t=h(this),n=p(this);return x(this,t,n,n.stepCount,e)},e.fn.steps.destroy=function(){var e=h(this);return s(this,e)},e.fn.steps.finish=function(){var e=p(this);o(this,e)},e.fn.steps.getCurrentIndex=function(){return p(this).currentIndex},e.fn.steps.getCurrentStep=function(){return v(this,p(this).currentIndex)},e.fn.steps.getStep=function(e){return v(this,e)},e.fn.steps.insert=function(e,t){var n=h(this),r=p(this);return x(this,n,r,e,t)},e.fn.steps.next=function(){var e=h(this),t=p(this);return y(this,e,t)},e.fn.steps.previous=function(){var e=h(this),t=p(this);return b(this,e,t)},e.fn.steps.remove=function(e){var t=h(this),n=p(this);return D(this,t,n,e)},e.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},e.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var Y=e.fn.steps.contentMode={html:0,iframe:1,async:2},Z=e.fn.steps.stepsOrientation={horizontal:0,vertical:1},et=e.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},tt=e.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:Y.html,contentLoaded:!1},nt=e.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:Z.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:et.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onFinishing:function(){return!0},onFinished:function(){},labels:{current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}};e.fn.extend({_aria:function(e,t){return this.attr("aria-"+e,t)},_removeAria:function(e){return this.removeAttr("aria-"+e)},_enableAria:function(){return this.removeClass("disabled")._aria("disabled","false")},_disableAria:function(){return this.addClass("disabled")._aria("disabled","true")},_hideAria:function(){return this.hide()._aria("hidden","true")},_showAria:function(){return this.show()._aria("hidden","false")},_selectAria:function(){return this.addClass("current")._aria("selected","true")},_deselectAria:function(){return this.removeClass("current")._aria("selected","false")},_getId:function(){return this.attr("id")},_setId:function(e){return this.attr("id",e)}})}(jQuery);var currentPage=0,furthestPage=0,pages=["#year","#course","#semester","#courses","#result"];$(document).ready(function(){function e(t,n){if(currentPage>=4)return!0;if(currentPage==3){t.find("form").submit(function(t){var r="ajax.php"+$(this).attr("action");n.load(r,$(this).serializeArray(),function(){e($(this),$(pages[currentPage+1]))});furthestPage=currentPage+1;$("#wizard").steps("next");t.preventDefault()});return!0}t.find("a").each(function(){$(this).click(function(t){var r="ajax.php"+$(this).attr("href");n.load(r,function(){e($(this),$(pages[currentPage+1]))});furthestPage=currentPage+1;$("#wizard").steps("next");t.preventDefault()})})}$("#year").load("ajax.php",function(){e($(pages[0]),$(pages[1]))})});$("#wizard").steps({headerTag:"h1",bodyTag:"section",transitionEffect:"slideLeft",labels:{finish:"Download"},onStepChanging:function(e,t,n){return n>furthestPage?!1:!0},onStepChanged:function(e,t,n){currentPage=t;currentPage>furthestPage&&(furthestPage=t)},onFinishing:function(e,t){var n="ajax.php?page=6";$.ajax({type:"HEAD",url:n}).done(function(e,t,r){var i="text/calendar";if(r.getResponseHeader("Content-Type")){var s=r.getResponseHeader("Content-Type");s.toLowerCase().substring(0,i.length)==i?$(pages[4]).fadeOut(function(){$(this).load("ajax.php?page=7",function(){$(this).fadeIn();window.location.href=n})}):alert("Server error while building calendar. Please try again.")}else alert("Server error while building calendar. Please try again.")}).fail(function(e,t,n){alert("Unexpected HTTP error on download request. "+n)});return!0}});